# 分库分表

## 分库分表面临的问题

### 1. 分布式事务

#### 	解决方案

1. 

### 2. 数据迁移

#### 	解决方案

### 3. 分布式锁

#### 	要求 

> 可以保证在分布式部署的应用集群中，同一个方法在同一时间只能被一台机器上的一个线程执行。
>
> 这把锁要是一把可重入锁（避免死锁）
>
> 这把锁最好是一把阻塞锁（根据业务需求考虑要不要这条）
>
> 有高可用的获取锁和释放锁功能
>
> 获取锁和释放锁的性能要好



#### 	解决方案

1. Mysql 数据库表（id，method_name， thread_info，create_time, invalid_time) method_name唯一索引 + 定时任务失效
2. Redis setnx  不存在时设置  

### 4. 分布式ID

#### 	解决方案

### 5. 跨节点Join 

#### 	解决方案

1. 业务逻辑分开查询

### 6. 分页条件查询 

#### 	解决方案

1. ES 等大数据方案

### 7. 容量规划、数据扩容

#### 	解决方案