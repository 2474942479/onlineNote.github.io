写biz层代码常规要考虑的一些问题：

1、幂等防重问题： 如果发生网络不稳定时，对方调用你的服务会出现超时的情况，这时他会再次调用你的服务，在这种情况下，你的服务就应该要考虑幂等、防重的问题。

2、数据断链的问题：如果你自己的服务在执行到一半时发生了异常，你的数据会不会有的表进了数据，有的表没有进数据，后续想重试都没有方法重试

3、服务耗时太长导致超时问题： 如果你的服务业务逻辑太多，别人在调用你的服务时会出现超时的情况，同时因为服务执行时间太长，也会导致你的服务响应能力很差，能支持的并发数很少。 这时就该考虑强弱依赖分离的问题。

4、不能及时发现错误处理错误的问题： 在出现了上面的一些问题时，因为没有相应的监控报警机制，除了问题自己也不知道，只能靠客户投诉一个解决一个，数据质量很差。 所以这时及时报警和及时重试就很有用了。





5、不需要强弱依赖分离的实现规范

1.1、代码建议分分成6个小层次，分别模板所示。  分成6层的好处时，代码超级清晰，对于数据库保存出错时的数据不完整性，会强迫你考虑到



  //1.参数校验

  //2.防重处理

  //3.业务规则验证

  //4.业务处理

  //5.数据落库 事物考虑

  //6.业务执行结果返回



1.2、落数据库时，一定不能直接return， 如果有失败的情况，一定要抛出异常，否则数据库事务不回滚，也就是因为这个原因，所以服务里面的update和insert方法失败时是肯定抛出异常的



6、需要强弱依赖分离的实现规范

1.1、对于弱依赖分离的情况，需通过异步任务的方式去实现。好处：加快接口的响应时间， 保证代码出错时能及时发现，因为异步任务如果处理练习几次报错，会发出报警





ACTION:

1、幂等专题

2、分段式重试，异常编程

3、强弱依赖专题

4、自动修复、补偿机制专题